#!/bin/bash

# Define the clang command path
CLANG_PATH="../../llvm-project-llvmorg-15.0.0/build/bin/clang"

# Define the file to analyze
FILE_TO_ANALYZE="removeending.c"

echo "Starting static analysis with Clang..."
START_TIME=$(date +%s)

timeout 100s $CLANG_PATH --analyze \
  -Xanalyzer -analyzer-checker=alpha.unix.cstring.OutOfBounds \
  -Xclang -analyzer-max-loop -Xclang 17 \
  -Xanalyzer -analyzer-config -Xanalyzer max-nodes=0 \
  $FILE_TO_ANALYZE

END_TIME=$(date +%s)

echo "Static analysis completed."

# Calculate and display the duration
DURATION=$((END_TIME - START_TIME))
echo "Start time: $(date -d @$START_TIME)"
echo "End time: $(date -d @$END_TIME)"
echo "Duration: $DURATION seconds"

